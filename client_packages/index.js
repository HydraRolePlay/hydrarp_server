global.Keys = {
    0: "Не установлено",
    1: 'ЛКМ',
    2: 'ПКМ',
    3: 'Break',
    4: 'Нет',
    5: 'Нет',
    6: 'Нет',
    8: 'Backspace',
    9: 'Tab',
    12: 'Clear',
    13: 'Enter',
    16: 'Shift',
    17: 'Control',
    18: 'Alt',
    19: 'Pause/Break',
    20: 'CapsLock',
    21: 'Hangul',
    23: 'Нет',
    24: 'Нет',
    25: 'Hanja',
    27: 'Escape',
    28: 'Conversion',
    29: 'Non-conversion',
    30: 'Нет',
    31: 'Нет',
    32: 'Пробел',
    33: 'PageUp',
    34: 'PageDown',
    35: 'End',
    36: 'Home',
    37: 'Стрелка влево',
    38: 'Стрелка вверх',
    39: 'Стрелка вправо',
    40: 'Стрелка вниз',
    41: 'Select',
    42: 'Print',
    43: 'Execute',
    44: 'PrintScreen',
    45: 'Insert',
    46: 'Delete',
    47: 'Help',
    48: '0',
    49: '1',
    50: '2',
    51: '3',
    52: '4',
    53: '5',
    54: '6',
    55: '7',
    56: '8',
    57: '9',
    65: 'A',
    66: 'B',
    67: 'C',
    68: 'D',
    69: 'E',
    70: 'F',
    71: 'G',
    72: 'H',
    73: 'I',
    74: 'J',
    75: 'K',
    76: 'L',
    77: 'M',
    78: 'N',
    79: 'O',
    80: 'P',
    81: 'Q',
    82: 'R',
    83: 'S',
    84: 'T',
    85: 'U',
    86: 'V',
    87: 'W',
    88: 'X',
    89: 'Y',
    90: 'Z',
    91: 'Win(Л)',
    92: 'Win(Пр)',
    93: 'Windows Menu',
    95: 'sleep',
    96: 'Доп(0)',
    97: 'Доп(1)',
    98: 'Доп(2)',
    99: 'Доп(3)',
    100: 'Доп(4)',
    101: 'Доп(5)',
    102: 'Доп(6)',
    103: 'Доп(7)',
    104: 'Доп(8)',
    105: 'Доп(9)',
    106: 'Доп(*)',
    107: 'Доп(+)',
    108: 'Нет',
    109: 'Доп(-)',
    110: 'Доп(,)',
    111: 'Доп(/)',
    112: 'F1',
    113: 'F2',
    114: 'F3',
    115: 'F4',
    116: 'F5',
    117: 'F6',
    118: 'F7',
    119: 'F8',
    120: 'F9',
    121: 'F10',
    122: 'F11',
    123: 'F12',
    124: 'F13',
    125: 'F14',
    126: 'F15',
    127: 'F16',
    128: 'F17',
    129: 'F18',
    130: 'F19',
    131: 'F20',
    132: 'F21',
    133: 'F22',
    134: 'F23',
    135: 'F24',
    144: 'Numlock',
    145: 'Scrolllock',
    160: 'Левый Shift',
    161: 'Правый Shift',
    162: 'Левый Ctrl',
    163: 'Правый Ctrl',
    164: 'Левый Alt',
    165: 'Правый Alt',
    166: 'Browser Back',
    167: 'Browser Forward',
    168: 'Browser Refresh',
    169: 'Browser Stop',
    170: 'Browser Search',
    171: 'Browser Favorites',
    172: 'Browser Home',
    173: 'Volume Mute',
    174: 'Volume Down',
    175: 'Volume Up',
    176: 'Next Track',
    177: 'Previous Track',
    178: 'Stop Media',
    179: 'Play/Pause',
    180: 'Start Mail',
    181: 'Select Media',
    182: 'Start App 1',
    183: 'Start App 2',
    186: ';',
    187: '=',
    188: ',',
    189: '-',
    190: '.',
    191: '/',
    192: 'Нет',
    219: '[',
    220: 'Нет',
    221: ']',
    222: 'Нет',
    223: '`',
    226: 'Нет',
    229: 'Нет',
    231: 'Нет',
    246: 'Нет',
    247: 'Нет',
    248: 'Нет',
    249: 'Нет',
    250: 'Нет',
    251: 'Нет',
    252: 'Нет',
    253: 'Нет',
    254: 'Нет',
    VK_LBUTTON: 1,
    VK_RBUTTON: 2,
    VK_CANCEL: 3,
    VK_MBUTTON: 4,
    VK_XBUTTON1: 5,
    VK_XBUTTON2: 6,
    VK_BACK: 8,
    VK_TAB: 9,
    VK_CLEAR: 12,
    VK_RETURN: 13,
    VK_SHIFT: 16,
    VK_CONTROL: 17,
    VK_MENU: 18,
    VK_ALT: 18,
    VK_PAUSE: 19,
    VK_CAPITAL: 20,
    VK_KANA: 21,
    VK_JUNJA: 23,
    VK_FINAL: 24,
    VK_HANJA: 25,
    VK_ESCAPE: 27,
    VK_CONVERT: 28,
    VK_NONCONVERT: 29,
    VK_ACCEPT: 30,
    VK_MODECHANGE: 31,
    VK_SPACE: 32,
    VK_PRIOR: 33,
    VK_NEXT: 34,
    VK_END: 35,
    VK_HOME: 36,
    VK_LEFT: 37,
    VK_UP: 38,
    VK_RIGHT: 39,
    VK_DOWN: 40,
    VK_SELECT: 41,
    VK_PRINT: 42,
    VK_EXECUTE: 43,
    VK_SNAPSHOT: 44,
    VK_INSERT: 45,
    VK_DELETE: 46,
    VK_HELP: 47,
    VK_0: 48,
    VK_1: 49,
    VK_2: 50,
    VK_3: 51,
    VK_4: 52,
    VK_5: 53,
    VK_6: 54,
    VK_7: 55,
    VK_8: 56,
    VK_9: 57,
    VK_A: 65,
    VK_B: 66,
    VK_C: 67,
    VK_D: 68,
    VK_E: 69,
    VK_F: 70,
    VK_G: 71,
    VK_H: 72,
    VK_I: 73,
    VK_J: 74,
    VK_K: 75,
    VK_L: 76,
    VK_M: 77,
    VK_N: 78,
    VK_O: 79,
    VK_P: 80,
    VK_Q: 81,
    VK_R: 82,
    VK_S: 83,
    VK_T: 84,
    VK_U: 85,
    VK_V: 86,
    VK_W: 87,
    VK_X: 88,
    VK_Y: 89,
    VK_Z: 90,
    VK_LWIN: 91,
    VK_RWIN: 92,
    VK_APPS: 93,
    VK_SLEEP: 95,
    VK_NUMPAD0: 96,
    VK_NUMPAD1: 97,
    VK_NUMPAD2: 98,
    VK_NUMPAD3: 99,
    VK_NUMPAD4: 100,
    VK_NUMPAD5: 101,
    VK_NUMPAD6: 102,
    VK_NUMPAD7: 103,
    VK_NUMPAD8: 104,
    VK_NUMPAD9: 105,
    VK_MULTIPLY: 106,
    VK_ADD: 107,
    VK_SEPARATOR: 108,
    VK_SUBTRACT: 109,
    VK_DECIMAL: 110,
    VK_DIVIDE: 111,
    VK_F1: 112,
    VK_F2: 113,
    VK_F3: 114,
    VK_F4: 115,
    VK_F5: 116,
    VK_F6: 117,
    VK_F7: 118,
    VK_F8: 119,
    VK_F9: 120,
    VK_F10: 121,
    VK_F11: 122,
    VK_F12: 123,
    VK_F13: 124,
    VK_F14: 125,
    VK_F15: 126,
    VK_F16: 127,
    VK_F17: 128,
    VK_F18: 129,
    VK_F19: 130,
    VK_F20: 131,
    VK_F21: 132,
    VK_F22: 133,
    VK_F23: 134,
    VK_F24: 135,
    VK_NUMLOCK: 144,
    VK_SCROLL: 145,
    VK_LSHIFT: 160,
    VK_RSHIFT: 161,
    VK_LCONTROL: 162,
    VK_RCONTROL: 163,
    VK_LMENU: 164,
    VK_RMENU: 165,
    VK_BROWSER_BACK: 166,
    VK_BROWSER_FORWARD: 167,
    VK_BROWSER_REFRESH: 168,
    VK_BROWSER_STOP: 169,
    VK_BROWSER_SEARCH: 170,
    VK_BROWSER_FAVORITES: 171,
    VK_BROWSER_HOME: 172,
    VK_VOLUME_MUTE: 173,
    VK_VOLUME_DOWN: 174,
    VK_VOLUME_UP: 175,
    VK_MEDIA_NEXT_TRACK: 176,
    VK_MEDIA_PREV_TRACK: 177,
    VK_MEDIA_STOP: 178,
    VK_MEDIA_PLAY_PAUSE: 179,
    VK_LAUNCH_MAIL: 180,
    VK_LAUNCH_MEDIA_SELECT: 181,
    VK_LAUNCH_APP1: 182,
    VK_LAUNCH_APP2: 183,
    VK_OEM_1: 186,
    VK_OEM_PLUS: 187,
    VK_OEM_COMMA: 188,
    VK_OEM_MINUS: 189,
    VK_OEM_PERIOD: 190,
    VK_OEM_2: 191,
    VK_OEM_3: 192,
    VK_OEM_4: 219,
    VK_OEM_5: 220,
    VK_OEM_6: 221,
    VK_OEM_7: 222,
    VK_OEM_8: 223,
    VK_OEM_102: 226,
    VK_PROCESSKEY: 229,
    VK_PACKET: 231,
    VK_ATTN: 246,
    VK_CRSEL: 247,
    VK_EXSEL: 248,
    VK_EREOF: 249,
    VK_PLAY: 250,
    VK_ZOOM: 251,
    VK_NONAME: 252,
    VK_PA1: 253,
    VK_OEM_CLEAR: 254
};

global.mainBrowser = mp.browsers.new('package://cef/!main-page/index.html');

mp.events.add('UserJoin', () => {
	setTimeout(function(){
		loadAllModules();
		mp.game.graphics.transitionToBlurred(500);
		mp.game.ui.displayRadar(false);
		let player = mp.players.local;
		player.setAlpha(0);
		mp.game.time.setClockTime(19, 55, 0);
		global.cam = mp.cameras.new("Camera", {x: 1752.64265, y: 3247.67114, z: 41.87276}, {x: 5, y: 0, z: 100}, 67);
		global.cam.setActive(true);
		mp.game.cam.renderScriptCams(true, false, 0, true, false);
		mp.gui.cursor.show(true, true);
		global.mainBrowser.execute('all_windows["container-first-page"] = true;updateWindows();');
		global.chat.show = false;
		mp.game.ui.displayHud(false);		
	},100);
});


mp.events.add('UserConfirm', () => {
	global.mainBrowser.execute('all_windows["container-first-page"] = false;all_windows["container-auth"] = true;updateWindows();');
	if(mp.storage.data.login !== undefined && mp.storage.data.password !== undefined)
		mp.events.callRemote('login', mp.storage.data.login, mp.storage.data.password);
});
global.localplayer = mp.players.local;
global.localplayer.data = [];
global.localplayer.data.cash = 500;
global.localplayer.data.card = 0;
global.localplayer.data.login = false;
global.localplayer.data.admin = 0;
global.localplayer.data.sqlID = 0;
global.localplayer.die = false;

function loadAllModules(){
	require('./player/text-chat/index.js');
	require('./player/items.js');
	require('./player/inventory.js');
	require("./player/phone/index.js");
	global.player_dont_close_iteraction = true;
	mp.nametags.enabled = false;
	mp.discord.update("Hydra RolePlay", "hydrarp.ru");
	global.newIteraction = false;
	mp.players.local.die = false;
	mp.players.local.dieInd = -1;
	// Вес инвентаря
	global.localplayer.data.maxInventoryWeight = 30;
	//
	global.localplayer.data.inventory = {
		'inventory-box': [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}],
		'fast-access-box': [{}, {}, {}, {}, {}],
		'head': [{}, {}],
		'body': [{}],
		'middle': [{}],
		'arm': [{}],
		'legs': [{}],
		'feet': [{}],
		'information': [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}],
		'trading-box': [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}],
		'trader-cells': [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}],
	};
	if(mp.storage.data.playerFriends === undefined) 
		global.playerFriends = [];
	else 
		global.playerFriends = mp.storage.data.playerFriends;

	global.auth = [];
	global.auth.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-auth', val)}; 
	global.choosePlayer = [];
	global.choosePlayer.browser = false;
	global.choosePlayer.browserOn = false;
	global.ambulance = {};
	mp.game.gxt.set("PM_PAUSE_HDR", "Hydra RolePlay");
	mp.gui.chat.show(false);
	global.localplayer.music = []
    global.localplayer.music.display = false;
    global.localplayer.music.Browser = [];
    global.localplayer.music.Browser.execute = function (val) {global.mainBrowser.execute('test(`' + val + '`);')};
    if(mp.storage.data.albums === undefined){
        mp.storage.data.albums = undefined;
        mp.storage.flush();
    } else {
        mp.storage.data.albums = undefined;
        mp.storage.flush();
    }

    if(mp.storage.data.vkId !== undefined){
        global.localplayer.music.Browser.execute(`$(".add_vk_music input").val('${mp.storage.data.vkId}');`);
        if(mp.storage.data.music !== undefined)
			global.localplayer.music.Browser.execute(`all_localmusic = ${JSON.stringify(mp.storage.data.music)}`);
		setTimeout(()=>{
            global.localplayer.music.Browser.execute(`getUserMusic();`);
			setTimeout(()=>{global.localplayer.music.Browser.execute("updateAlbums();updateOwnList(true);");}, 1000);
        }, 15000)
    } else {
        global.localplayer.music.Browser.execute(`$(".add_vk_music input").val();`);
    }
	global.AnimationBrowser = [];
	global.AnimationBrowser.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-animations', val)};
	global.PlayerPhone = {};
	global.PlayerPhone.browser = [];
	global.PlayerPhone.browser.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-phone', val)}; 
	global.PlayerPhone.browsIsOpen = false;
	global.PlayerPhone = {};
	global.PlayerPhone.browser = [];
	global.PlayerPhone.browser.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-phone', val)}; 	
	global.inventory = [];
	global.inventory.browser = [];
	global.inventory.browser.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-player-inventory', val)}; 
	global.hud = [];
	global.hud.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-hud', val)}; 
	global.chat = [];
	global.chat.browser = []
	global.chat.browser.execute = function (val) {global.mainBrowser.call('sendInfoToWindow', 'container-chat', val)}; 
	global.chat.show = false;
	global.chat.active = false;
	// Загружаем модули
	/// Музыкальный планшет
	require('./cef/music-player/index.js'); 
	/// Music player
	require('./player/music-browser/music.js');
	/// Парковки (biz)
	require('./biz/veh-parks/index.js');
	/// Магазин одежды (biz)
	require('./biz/clothing-shop/index.js');
	/// Quest Dialog and (biz)
	require('./biz/quest-dialog/index.js');
	/// Grocery shop (biz)
	require('./biz/grocery-shop/index.js');
	/// Car shop (biz)
	require('./biz/car-shop/index.js');
	/// Weapon shop (biz)
	require('./biz/weapon-shop/index.js');
	/// Refill-station (biz)
	require('./biz/car-refill-station/index.js');
	/// Tunning (biz)
	require('./biz/veh-tunning/index.js');

	// Anticheat
	require('./anticheat/index');

	/// Банкоматы
	require('./player/bank.js');
	/// Voice chat
	require('./player/voice-chat/index.js');
	/// Nametags
	require('./player/nametags.js');
	/// CharCreator
	require('./player/char-creator/index.js');
	/// Buttons
	require('./player/buttons.js');
	/// Veh-interaction
	require('./player/veh.js');
	/// Hud
	require('./cef/hud/index.js');
	/// FirstQuest mb rename
	require('./player/firstQuest.js');
	/// Admin-panel
	require('./admin/admin-panel.js');
	require('./admin/flyMode.js');
	require('./admin/animations.js');
	/// Player`s home
	require('./player/home.js');

	/// Mb events
	require('./player/regAndAuth.js');
	require('./player/chooseAndCreate.js');
	require('./player/die.js');
	require('./player/interaction.js');
	require('./player/animations.js');

	/// Player factions
	require('./player/factions/emc.js');
	require('./player/factions/fib.js');
	require('./player/factions/mid.js');
	require('./player/factions/police.js');
	require('./player/factions/gid.js');
}

let ped = mp.peds.new(
    mp.game.joaat('a_m_m_hillbilly_02'), 
    new mp.Vector3(87.36916, -1955.03662, 20.74652),
    -43.298,
    0
);
mp.events.add('CreateNewPeds', (peds) => {
	peds = JSON.parse(peds);
	for(let i = 0; i < peds.length; i++){
		mp.peds.new(
			mp.game.joaat(peds[i].id), 
			new mp.Vector3(peds[i].x, peds[i].y, peds[i].z),
			peds[i].heading,
			0
		);
	}
});

function syncTime() {
	if(!global.localplayer.data.login) return;
	mp.events.callRemote('UpdateClientTime', 123);
}
setInterval(syncTime, 500);

mp.events.add('setGlobalTime', (hours, minutes, seconds) => {
	mp.game.time.setClockTime(2, minutes, seconds);
	let hour = hours;
	let min = minutes;
	if (min < 10) min = "0" + min.toString();
	if (hour < 10) hour = "0" + hour.toString();
	global.hud.execute(`HUD.time="${hour}:${min}"`);
});

function checkCamInAir(){
	if (mp.game.invoke('0xD9D2CFFF49FAB35F')) {
		global.hud.execute(`interactionIndicator.show=0`);
		setTimeout(() => {
			checkCamInAir();
		}, 400);
	} else {
		global.mainBrowser.execute('all_windows["container-hud"] = true;all_windows["container-chat"] = true;updateWindows();');
		global.localplayer.data.login = true;
		mp.game.ui.displayHud(false);
		mp.game.ui.displayRadar(true);
		global.hud.execute(`HUD.show=1`);
		global.hud.execute(`help.show=1`);
		global.hud.execute(`logotype.show=1`);
		global.chat.show = true;
		global.chat.browser.execute(`setState("transparent");`);
		mp.events.callRemote("getAllPeds");
		mp.events.callRemote("getAllClientPoints");
		mp.players.local.freezePosition(false);
		if(global.eButton)
			global.hud.execute(`interactionIndicator.show=1`);
	}
}

mp.events.add('hud', (cash, card, bank, sim, adm, sql, nick, gender, level, firstTime, usr_login) => {
	global.inventory.browser.execute('getUsrImage(' + usr_login + ')')
	mp.gui.cursor.show(false, false);
	mp.events.callRemote('UpdateClientTime', 123);
	mp.events.callRemote('police:checkPlayer');
	if(mp.storage.data.mutedPlayers !== undefined)
		mp.events.callRemote('playersMuted', JSON.stringify(mp.storage.data.mutedPlayers));
	else{
		mp.storage.data.mutedPlayers = [];
		mp.storage.flush();
		mp.events.callRemote('playersMuted', JSON.stringify(mp.storage.data.mutedPlayers));
	}
	global.player_dont_close_iteraction = false;
	global.localplayer.data.cash = cash;
	global.localplayer.data.card = card;
	global.localplayer.data.sqlID = sql;
	global.localplayer.data.sim = sim;
	global.localplayer.data.bank = bank;
	global.localplayer.data.admin = adm;
	global.localplayer.data.nickname = nick;
	global.localplayer.data.gender = gender;
	global.localplayer.data.level = level;
	if(!firstTime){
		mp.players.local.freezePosition(true);
		checkCamInAir();
		global.door();
	} else {
		let camPos = mp.players.local.position;
		mp.players.local.freezePosition(false);
		setTimeout(function(){
			
			mp.players.local.taskGoToCoordAnyMeans(96.09530, -1919.93066, 20.75015, 0.5, 0, true, 1, 1.0);
			global.cam = mp.cameras.new("Camera", {x: 103.73390, y: -1911.18445, z: 24.76904 + 5}, {x: 0, y: 0, z: 0}, 50);
			global.cam.setActive(true);
			mp.game.cam.renderScriptCams(true, false, 0, true, false);
			global.cam.pointAtCoord(103.73390, -1911.18445, 23.76904);
			global.cam.setParams(92.18790, -1919.7399, 22.99109, 0, 0, 0, 70, 4000, 1, 1, 2); 
			setTimeout(function(){
				let camGame = mp.cameras.new("gameplay");
				let cam_rot = camGame.getCoord();
				global.cam.pointAtCoord(96.09530, -1919.93066, 20.75015);
				global.cam.setParams(97.87033, -1917.64065, 21.0, 0, 0, 0, 60, 2000, 1, 1, 2); 
				setTimeout(function(){
					try{
						if(global.cam !== null){
							global.cam.setActive(false);
							mp.game.cam.renderScriptCams(false, true, 0, true, true);
							global.cam.destroy();
							global.cam = null;
						}
					}catch(e){}
					global.mainBrowser.execute('all_windows["container-hud"] = true;all_windows["container-chat"] = true;updateWindows();');
					mp.game.ui.displayHud(false);
					mp.game.ui.displayRadar(true);
					global.hud.execute(`HUD.show=1`);
					global.hud.execute(`help.show=1`);
					global.hud.execute(`logotype.show=1`);
					global.chat.show = true;
					global.chat.browser.execute(`setState("transparent");`);
					mp.events.callRemote("getAllPeds");
					mp.events.callRemote("getAllClientPoints");
					mp.players.local.freezePosition(false);
					if(global.eButton)
						global.hud.execute(`interactionIndicator.show=1`);
					global.localplayer.data.login = true;
					mp.events.callRemote("getAllPeds");
					mp.events.callRemote("getAllClientPoints");
					/// task??
					global.hud.execute(`pushTask({header: 'Квест', text: 'Пройдите начальный квест', time: '300'});`);
					global.door();
				}, 2000);
			}, 4000);
		}, 10);
	}
	
});

global.eButton = 0;
global.eButtonParams = 0;
global.eButtonClient = 0;
mp.events.add('onEiteraction', (callBack, params, client) => {
	if((mp.players.local.vehicle && callBack !== 'refillCar' && callBack !== 'tunning:enterShop') || ((callBack === 'refillCar' || callBack === 'tunning:enterShop') && mp.players.local.vehicle && mp.players.local.vehicle.getPedInSeat(-1) !== mp.players.local.handle))
		return;
	if(callBack === 'refillCar' && !mp.players.local.vehicle) return;
	if(callBack === 'tunning:enterShop' && !mp.players.local.vehicle) return;
	global.eButton = callBack;
	global.eButtonParams = params;
	global.eButtonClient = client;
	global.hud.execute(`interactionIndicator.show=1`);
});

mp.events.add('SendAlert', (mes, color) => {
	global.hud.execute(`pushAlert({after: 0, before: 50, time: 5000, type: '${color}', msg: '${mes}'})`);
});

mp.events.add('TimeOutAlert', (header, text, timer) => {
	global.hud.execute(`clearInterval(interval);
						$('.ptask').removeClass('active');`);
	global.hud.execute(`pushTask({header: '${header}', text: '${text}', time: '${timer}'});`);
});

mp.events.add('SendYesOrNoAlert', (mes, callBack) => {
	if(global.newIteraction) return;
	global.hud.execute(`pushAlert({after: 0, before: 50, time: 15000, type: 'green', msg: '${mes}:<br><br>(Y) - согласиться<br>(N)  - отказаться &ensp;'})`);
	global.newIteraction = callBack;
});

mp.events.add('NewFaction', (faction) => {
	global.localplayer.data.faction = faction;
});

mp.events.add('closeInteractionButton', () => {
	global.eButton = 0;
	global.eButtonParams = 0;
	global.eButtonClient = 0;
	global.hud.execute(`interactionIndicator.show=0`);
});

global.allPointsNow = [];

mp.events.add('updatePoints', (Points) => {
	AllPoints = JSON.parse(Points);
	for(let i = 0; i < global.allPointsNow.length; i++){
		global.allPointsNow[i][0].destroy();
		global.allPointsNow[i][1].visible = false;
	}
	global.allPointsNow = [];
	for(let i = 0; i < AllPoints.length; i++){
		if(AllPoints[i].show){
			global.allPointsNow.push([
				mp.labels.new(AllPoints[i].name, new mp.Vector3(AllPoints[i].x, AllPoints[i].y, AllPoints[i].z + 0.5), 
				{
					dismension: 0,
					los: true,
					font: 0,
					drawDistance: 10,
				}),
				mp.markers.new(20, new mp.Vector3(AllPoints[i].x, AllPoints[i].y, AllPoints[i].z - 0.3), 1.5, 
				{
					rotation: new mp.Vector3(0, 180, 0),
					color: [273,60,100, 125],
					dimension: 0
				}),
				AllPoints[i].call
			]);
		}
	}
});

mp.events.add('UpdateMoneyClient', (cash, card, adm) => {
	global.localplayer.data.cash = cash;
	global.localplayer.data.card = card;
	global.localplayer.data.admin = adm;
	mp.events.callRemote('UpdateMoney');
});


mp.game.graphics.drawLightWithRangeAndShadow(263.56292724609,-1353.3096923828,25.537803649902,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(280.3837890625,-1338.041015625,25.537803649902,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(284.31265258789,-1343.4700927734,25.537792205811,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(291.95794677734,-1348.7823486328,25.537811279297,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(280.86584472656,-1347.7416992188,25.537790298462,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(273.31185913086,-1342.0401611328,25.537790298462,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(267.32916259766,-1347.6127929688,25.537790298462,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(273.38619995117,-1359.3002929688,25.537803649902,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(256.89846801758,-1360.6467285156,25.537794113159,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(253.51625061035,-1364.2818603516,25.537794113159,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(252.07496643066,-1353.7518310547,25.570053100586,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(255.51545715332,-1349.5339355469,25.5378074646,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(260.64190673828,-1340.8376464844,25.538597106934,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(253.58151245117,-1371.5705566406,25.537788391113,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(246.2555847168,-1365.9683837891,25.537792205811,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(238.51554870605,-1358.7192382813,25.537792205811,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(239.7081451416,-1367.2937011719,25.532159805298,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(235.7769317627,-1372.8176269531,28.090185165405,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(239.9889831543,-1366.6783447266,30.788396835327,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(240.39033508301,-1361.080078125,30.648006439209,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(246.68127441406,-1365.1772460938,30.648000717163,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(252.25433349609,-1371.0084228516,30.648000717163,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(250.7177734375,-1362.9478759766,30.649421691895,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(260.27365112305,-1360.2191162109,33.121673583984,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(253.98092651367,-1366.8995361328,35.592391967773,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(255.75984191895,-1356.9400634766,38.063400268555,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(250.44812011719,-1369.0244140625,40.534366607666,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(243.04637145996,-1376.8076171875,40.534370422363,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(229.2979888916,-1368.0668945313,40.534378051758,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(237.43927001953,-1362.8299560547,40.534374237061,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(260.8352355957,-1377.9183349609,40.534339904785,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(254.07499694824,-1384.5961914063,40.534374237061,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(267.90411376953,-1364.1013183594,25.537790298462,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(263.74963378906,-1360.7296142578,25.537788391113,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(270.89685058594,-1354.8754882813,25.537797927856,80,80, 80,10.0, 10.0, 10.0)
mp.game.graphics.drawLightWithRangeAndShadow(258.80786132813,-1355.1391601563,25.582710266113,80,80, 80,10.0, 10.0, 10.0)

global.doorControls = [
	//JAIL
	[-264728216, -264728216, -561.32, -1318.77, false],
	[-264728216, -264728216, -563.91, -1318.76, false],
	[-658026477, -658026477, -565.72, -1307.69, false],
	//HOME
	[1145337974 , 1274.56, -1720.36, 54.77, true],
	[520341586 , -14.87 -1441.19, 31.193, true],
	[-607040053 , -1149.7, -1521.12, 10,.7825, true],
	[308207762 , 7.52, 539.53, 176.18, true],
	[-1686014385 , -816.12, 177.51, 72.83, true],
	//Дом Майка
	[2608952911 , -816.1068, 177.5109, 72.82738, true],
	[159994461 , -816.716, 179.098, 72.82738, true],
	[30769481 , -815.2816, 185.975, 72.99993, true],
	[1245831483 , -794.5051, 178.0124, 73.04045, true],
	[2840207166 , -796.5657, 177.2214, 73.04045, true],
	[1245831483 , -794.1853, 182.568, 73.04045, true],
	[2840207166 , -793.3943, 180.5075, 73.04045, true],
	//CITI HALL	
	[110411286 , 232.6054, 214.1584, 106.4049, true],
	[110411286 , 231.5123, 216.5177, 106.4049, true],
	[110411286 , 260.6432, 203.2052, 106.4049, true],
	[110411286 , 258.2022, 204.1005, 106.4049, true],
	//POLICE
	[631614199 , 461.8065, -994.4086, 25.06443, true],
	[631614199 , 461.8065, -997.6583, 25.06443, true],
	[631614199 , 461.8065, -1001.302, 25.06443, true],
	[749848321, 453.0793, -983.1895, 30.83926, false],
	//Метал
	[1099436502, -608.7289, -1610.315, 27.15894, false],
	[2667367614, -611.32, -1610.089, 27.15894, false],
	[362975687, -614.3726, -1620.322, 33.16059, false],
	[362975687, -614.1459, -1617.731, 33.16059, false],
	[362975687, -625.608, -1624.516, 33.16059, false],
	[362975687, -623.017, -1624.743, 33.16059, false],
	[362975687, -604.3364, -1626.377, 33.16059, false],
	[362975687, -606.9275, -1626.151, 33.16059, false],
	[362975687, -603.8043, -1620.3, 33.16059, false],
	[362975687, -606.3953, -1620.074, 33.16059, false],
	[812467272, -589.5237, -1621.55, 33.16059, false],
	[812467272, -590.8198, -1621.436, 33.16059, false],
	[362975687, -566.3251, -1630.491, 33.16059, false],
	[362975687, -566.0984, -1627.9, 33.16059, false],
	[362975687, -563.3792, -1620.248, 27.16076, false],
	[362975687, -560.7881, -1620.475, 27.16076, false],
	[362975687, -567.4113, -1599.886, 27.16076, false],
	[362975687, -567.6379, -1602.477, 27.16076, false],
	[362975687, -604.3359, -1626.377, 27.16076, false],
	[2667367614, -592.7109, -1628.986, 27.15931, false],
	[1099436502, -592.9376, -1631.577, 27.15931, false],
	//Business
	[3082015943, -1226.94091796875, -901.183349609375, 12.291525840759277, false],
	[3426294393, -53.40807342529297, -1757.62353515625, 29.43962860107422, false],
	[2065277225, -53.40807342529297, -1757.62353515625, 29.43962860107422, false],
	[1196685123, 376.278076171875, 322.9766845703125, 103.57259368896484, false],
	[997554217, 376.278076171875, 322.9766845703125, 103.57259368896484, false],
	[3082015943, -1491.5069580078125, -384.0491027832031, 40.092247009277344, false],
	[3426294393, -711.617919921875, -916.8017578125, 19.214231491088867, false],
	[2065277225, -711.617919921875, -916.8017578125, 19.214231491088867, false],
	[3426294393, 1159.717529296875, -327.26611328125, 69.2147445678711, false],
	[2065277225, 1159.717529296875, -327.26611328125, 69.2147445678711, false],
	[3082015943, 1142.085693359375, -981.194580078125, 46.1824951171875, false],
	[1196685123, 29.163177490234375, -1349.8294677734375, 29.32967758178711, false],
	[997554217, 29.163177490234375, -1349.8294677734375, 29.32967758178711, false],
	[868499217, 83.24524688720703, -1391.4180908203125, 29.420228958129883, false],
	[3146141106, 83.24524688720703, -1391.4180908203125, 29.420228958129883, false],
	[2372686273, -156.1173858642578, -305.908447265625, 39.29642868041992, false],
	[1780022985, 127.50997161865234, -210.63079833984375, 54.53601837158203, false],
	[2372686273, -717.0438232421875, -157.21432495117188, 36.98802947998047, false],
	[1780022985, -1201.852294921875, -778.1488037109375, 17.33728790283203, false],
	[868499217, -817.0199584960938, -1079.43212890625, 11.132533073425293, false],
	[3146141106, -817.0199584960938, -1079.43212890625, 11.132533073425293, false],
	[2372686273, -1456.1575927734375, -231.6400604248047, 49.34505081176758, false],
	[868499217, 417.87493896484375, -807.4716796875, 29.398887634277344, false],
	[3146141106, 417.87493896484375, -807.4716796875, 29.398887634277344, false],
	[97297972, 16.817607879638672, -1115.93212890625, 29.791187286376953, false],
	[4286093708, 16.817607879638672, -1115.93212890625, 29.791187286376953, false],
	[97297972, 844.0791015625, -1023.93017578125, 28.077791213989258, false],
	[4286093708, 844.0791015625, -1023.93017578125, 28.077791213989258, false],
	[97297972, 242.7019805908203, -44.359134674072266, 69.89649963378906, false],
	[4286093708, 242.7019805908203, -44.359134674072266, 69.89649963378906, false],
	[97297972, -1315.12158203125, -390.1048583984375, 36.56482696533203, false],
	[4286093708, -1315.12158203125, -390.1048583984375, 36.56482696533203, false],	
	[97297972, -663.955078125, -945.7255859375, 21.62474250793457, false],
	[4286093708, -663.955078125, -945.7255859375, 21.62474250793457, false],	
	[2450522579, -30.14031982421875, -147.07333374023438, 57.07428741455078, false],
	[2450522579, -1289.15625, -1116.1783447265625, 6.985243320465088, false],
	[2450522579, 1206.2305908203125, -470.36859130859375, 66.19681549072266, false],
	[2059227086, -38.75587463378906, -1109.072021484375, 26.437297821044922, false],
	[1417577297, -38.75587463378906, -1109.072021484375, 26.437297821044922, false],
	[543652229, 1321.108642578125, -1649.2298583984375, 52.14554214477539, false],
	[2243315674, -33.424800872802734, -1102.222412109375, 26.422353744506836, false],
	[543652229, -1155.296142578125, -1422.6978759765625, 4.7785420417785645, false],
]


global.door = function() {
	for (var i = 0; i < doorControls.length; i++) {
		let [model, x, y, z, status] = doorControls[i];
		if(mp.game.object.getStateOfClosestDoorOfType(model , x, y, z, 1, 1).locked !== status) {
			mp.game.object.doorControl(model, x, y, z, status == true ? true : false, 0, 0, 0);
		}
	}
	
}